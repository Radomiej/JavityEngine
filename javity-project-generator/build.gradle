buildscript {
    repositories {
    	mavenLocal()
        mavenCentral()
        maven { url 'https://github.com/steffenschaefer/gwt-gradle-plugin/raw/maven-repo/' }
		maven { url "https://mini2dx.org/maven/content/repositories/thirdparty/" }
		maven { url "https://mini2dx.org/maven/content/repositories/releases/" }
        jcenter()
    }
    dependencies {
		classpath 'org.mini2Dx:parcl:1.0.7'
    }
}

apply plugin: "eclipse"
apply plugin: "idea"
apply plugin: "maven"
apply plugin: "java"
apply plugin: "application"
apply plugin: "org.mini2Dx.parcl"
    
group = 'org.mini2Dx'
version = '1.2.0-SNAPSHOT'

sourceCompatibility = 1.7
targetCompatibility = 1.7

mainClassName = "com.badlogic.gdx.setup.GdxSetupUI"

uploadArchives {
	repositories {
		mavenDeployer {
			repository(url: "http://maven.mini2dx.org/content/repositories/releases") {
				if(project.hasProperty('mini2DxMavenUser')) {
					authentication(userName: project.property('mini2DxMavenUser'), password: project.property('mini2DxMavenPassword'))
				}
			}
			snapshotRepository(url: "http://maven.mini2dx.org/content/repositories/snapshots") {
				if(project.hasProperty('mini2DxMavenUser')) {
					authentication(userName: project.property('mini2DxMavenUser'), password: project.property('mini2DxMavenPassword'))
				}
			}
		}
	}
}

repositories {
	mavenLocal()
	mavenCentral()
	maven { url "https://oss.sonatype.org/content/repositories/snapshots/" }
	maven { url "https://oss.sonatype.org/content/repositories/releases/" }
}

ext {	
	junitVersion="4.8.1"
	jmockVersion="2.5.1"
}

tasks.eclipse.doLast {
	delete ".project"
}

dependencies {
	compile "com.github.zafarkhaja:java-semver:0.9.0"

	testCompile "junit:junit:$junitVersion"
	testCompile "org.jmock:jmock-junit4:$jmockVersion"
	testCompile "org.jmock:jmock-legacy:$jmockVersion"
}

task wrapper(type: Wrapper) {
    gradleVersion = '2.4'
}

parcl {
	exe {
		vmArgs = ["-Xmx512m"]
		exeName = "mini2Dx-project-generator"
		
		withJre("${org.gradle.internal.jvm.Jvm.current().javaHome}")
	}

	app {
		vmArgs = ["-Xmx512m"]
		appName = "mini2Dx Project Generator"
		icon = "icon/icon.icns"
		applicationCategory = "public.app-category.developer-tools"
		displayName = 'mini2Dx Project Generator'
		identifier = 'org.mini2Dx.setup'
		copyright = 'Copyright 2015 mini2Dx'
		
		withJre("${org.gradle.internal.jvm.Jvm.current().javaHome}")
	}

	linux {
		vmArgs = ["-Xmx512m"]
		binName = "mini2Dx-project-generator"
		
		withJre("${org.gradle.internal.jvm.Jvm.current().javaHome}")
	}
}
